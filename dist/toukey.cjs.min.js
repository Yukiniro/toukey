"use strict";function e(e){return function(e){if(Array.isArray(e))return t(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,r){if(!e)return;if("string"==typeof e)return t(e,r);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return t(e,r)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function t(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function r(e){switch(e){case"ctrl":return"Control";case"space":return" ";case"left":return"ArrowLeft";case"right":return"ArrowRight";case"up":return"ArrowUp";case"bottom":return"ArrowBottom";default:return e}}function n(e){return"string"==typeof e}function o(e,t){var r=e.indexOf(t);-1!==r&&e.splice(r,1)}function u(e){return e.replace(/\s+/g,"")}function i(e){return e.toLowerCase()}Object.defineProperty(exports,"__esModule",{value:!0});var c="default",a=!0,s=[],f=new Map;function l(e){return Array.isArray(e)?i(e.map((function(e){return r(e)})).sort().join(""))===i(s.join("")):1===s.length&&i(s[0])===r(e)}function p(){s.length=0}function y(t){!function(e){var t=e.type,r=e.key,n=e.repeat;"keydown"!==t||n||s.push(r);"keyup"===t&&queueMicrotask((function(){o(s,r)}))}(t);var r=f.get("*")||[],n=f.get(c)||[];[].concat(e(r),e(n)).forEach((function(e){var r=e.handler,n=e.keydown,o=e.keyup,i=e.key,c=e.splitValue;u(i).split(",").forEach((function(e){if(function(e,t){return e.split(t).length>1}(e,c)){var i=function(e,t){return u(e).split(t)}(e,c);l(i)&&d(r,n,o,t)}else l(e)&&d(r,n,o,t)}))}))}function d(e,t,r,n){var o=n.type;("keydown"===o&&t||"keyup"===o&&r)&&e.call(this,n)}f.set("*",[]),exports.clearAll=function(){f.clear(),f.set("*",[]),c="default",this._clearPressedKeys()},exports.deleteScope=function(e){"*"!==e&&(f.delete(e),c="default")},exports.getScope=function(){return c},exports.setScope=function(e){if(!n(e))throw new Error("scope must be string");c=e},exports.subscribe=function(e,t,r){if(!n(e))throw new Error("key must be string");if("function"!=typeof t)throw new Error("handler must be function");var u=e,i="default",c="+",s=!1,l=!1;n(r)?i=r:function(e){return"[object Object]"===Object.prototype.toString.call(e)}(r)&&Object.keys(r).forEach((function(e){"scope"===e&&(i=r[e]),"splitValue"===e&&(c=r[e]),"keydown"===e&&(s=!0),"keyup"===e&&(l=!0)})),s||l||(s=!0),a&&(a=!1,document.addEventListener("keydown",y),document.addEventListener("keyup",y),window.addEventListener("focus",p),window.addEventListener("blur",p)),f.has(i)||f.set(i,[]);var d=f.get(i),w={handler:t,key:u,splitValue:c,keydown:s,keyup:l};return d.push(w),function(){var e=f.get(i);e&&o(e,w)}};
