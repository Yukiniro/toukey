function t(t){return function(t){if(Array.isArray(t))return e(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,r){if(!t)return;if("string"==typeof t)return e(t,r);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return e(t,r)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function e(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function r(t){switch(t){case"ctrl":return"Control";case"left":return"ArrowLeft";case"right":return"ArrowRight";case"up":return"ArrowUp";case"bottom":return"ArrowBottom";default:return t}}function n(t){return"string"==typeof t}function o(t,e){var r=t.indexOf(e);-1!==r&&t.splice(r,1)}function u(t){return t.replace(/\s+/g,"")}function i(t){return t.toLowerCase()}var a="default",c=!0,f=[],s=new Map;function l(t){return Array.isArray(t)?i(t.map((function(t){return r(t)})).sort().join(""))===i(f.join("")):1===f.length&&i(f[0])===r(t)}function p(e){!function(t){var e=t.type,r=t.key,n=t.repeat;"keydown"!==e||n||f.push(r);"keyup"===e&&queueMicrotask((function(){o(f,r)}))}(e);var r=s.get("*")||[],n=s.get(a)||[];[].concat(t(r),t(n)).forEach((function(t){var r=t.handler,n=t.keydown,o=t.keyup,i=t.key,a=t.splitValue;u(i).split(",").forEach((function(t){if(function(t,e){return t.split(e).length>1}(t,a)){var i=function(t,e){return u(t).split(e)}(t,a);l(i)&&y(r,n,o,e)}else l(t)&&y(r,n,o,e)}))}))}function y(t,e,r,n){var o=n.type;("keydown"===o&&e||"keyup"===o&&r)&&t.call(this,n)}s.set("*",[]);var d={subscribe:function(t,e,r){if(!n(t))throw new Error("key must be string");if("function"!=typeof e)throw new Error("handler must be function");var u=t,i="default",a="+",f=!1,l=!1;n(r)?i=r:function(t){return"[object Object]"===Object.prototype.toString.call(t)}(r)&&Object.keys(r).forEach((function(t){"scope"===t&&(i=r[t]),"splitValue"===t&&(a=r[t]),"keydown"===t&&(f=!0),"keyup"===t&&(l=!0)})),f||l||(f=!0),c&&(c=!1,document.addEventListener("keydown",p),document.addEventListener("keyup",p)),s.has(i)||s.set(i,[]);var y=s.get(i),d={handler:e,key:u,splitValue:a,keydown:f,keyup:l};return y.push(d),function(){var t=s.get(i);t&&o(t,d)}},getScope:function(){return a},setScope:function(t){if(!n(t))throw new Error("scope must be string");a=t},deleteScope:function(t){"*"!==t&&(s.delete(t),a="default")}};export{d as default};
